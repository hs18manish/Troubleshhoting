SRE/DevOps-Troubleshooting

https://awstip.com/sre-devops-interview-questions-linux-troubleshooting-extended-c12cb5ded3b0

Linux Troubleshooting

2. What happens when you typeÂ lsÂ on terminal
These type of questions are used to understand interviewee attention to details and depth ofÂ Linux InternalsÂ . Basically the interviewer wants to know if you underÂ forks()Â andÂ exec()Â system calls.
the shell reads what you typed using theÂ getline()Â function and function calledÂ strtok()Â which took the line to tokenize. Shell also check if the 1st tokenÂ lsÂ is a Shell alias or not. If itâ€™s not a built-in function, shell will find theÂ PATHÂ variable in the directory. Since it holds the absolute paths for all the executable binary files. Once it finds the binary forÂ lsÂ , the program is loaded in memory and a system callÂ fork()Â is made. This creates a child process asÂ lsÂ and the shell will be the parent process. TheÂ fork()Â returnsÂ 0Â to the child process so it knows it has to act as a child and returnsÂ PIDÂ of the child to the parent process(i.e. the shell).
Next, theÂ lsÂ process executes the system callÂ execve()Â that will give it a brand new address space with the program that it has to run. Now, theÂ lsÂ can start running its program. TheÂ lsÂ utility uses a function to read the directories and files from the disk by consulting the underlying filesystemâ€™sÂ inodeÂ entries.
OnceÂ lsÂ process is done executing, it will call theÂ _exit()Â system call with an integerÂ 0Â that denotes a normal execution and the kernel will free up its resources.
Note: you can useÂ strace lsÂ to dig deeper into theÂ system calls
3. Explain Linux Inodes
An Inode number points to an Inode. An Inode is a data structure that stores the information about the file or folder
Detailed Answer is available here
4. Crash vs Panic
CrashÂ usually happens when a trap occurs when the application trying to access memory incorrectly.Â PanicÂ usually when the application kill/shutdown itself abruptly. Main difference betweenÂ crashÂ andÂ panicÂ is thatÂ crashÂ is hardware or OS initiated andÂ panicÂ usually imitated by application by callingÂ abort()Â function. Some applications use a special function called aÂ signal handlerÂ to generate information about theÂ trapÂ other can useÂ gdbÂ to collection information about the same.
Most common bad programming signals areÂ SIGSEGVÂ ,Â SIGBUSÂ andÂ SIGILLÂ usually caused byÂ bad memory management, a bad pointer, uninitialized values or memory corruption.
5. Explain the /proc filesystem
/procÂ is very special in that it is also a virtual filesystem. Itâ€™s sometimes referred to as a process information pseudo-file system. It doesnâ€™t contain â€˜realâ€™ files but runtime system information. Lot of system utilities are simply calls to files in this directory
/procÂ file system has theÂ pidÂ for the process running. if you doÂ cd /procs/selfÂ you will see al lot file and there size isÂ 0Â however you will see that they do contain information
/mapsÂ provides information about the memory address space of the process
/cmdlineÂ contains the arguments for theÂ commandline
/environÂ provides information about the process' current environment
/fdÂ contains symbolic link pointing to each file for which the process currently has file descriptor
/proc/locksÂ shows all the locks on currently exist in the system
/proc/sys/fsÂ contains some useful information likeÂ file-nrÂ which tells you the number of open files and available on the system
/proc/sys/vmÂ holds files and information to tune virtual memory
6. When I get a â€œfilesystem is fullâ€ error, but â€œdfâ€ shows there is free space
Check if you see zero IFree by usingÂ df -iÂ . If that is not the case then see if deleted files are still in use usingÂ lsofÂ and restart those processes
7. What are the performance tools you would use on Linux Machine
uptimeâ€¨dmesg | tailâ€¨vmstat 1â€¨mpstat -P ALL 1â€¨pidstat 1â€¨iostat -xz 1â€¨free -mâ€¨sar -n DEV 1â€¨sar -n TCP,ETCP 1â€¨top
Detailed Answer is available here
8. Explain Linux FileSystem
Interviewer wants to know how much you understand about linux filesystems. A specific type of data storage format, such as EXT3, EXT4, BTRFS, XFS, and so on. Linux supports almost 100 types of filesystems.
Detailed Answer is available here
9. Explain Kernel Space and User Space
This can be a rabbit hole question, Interviewer can go as deep as possible to see what are your limits. This is also the most interesting topic about Linux that how the control flows from User Space to Kernel Space and why that is important. Why canâ€™t we directly access the Kernel Space. What are use internal libraries likeÂ libcÂ and why we needÂ system call
Detailed Answer is available here
10. How would you troubleshoot a High I/O Issue
Detail Answer is available here
11. What are processes and threads?
Process are basically the programs which are dispatched from the ready state and are scheduled in the CPU for execution. PCB(Process Control Block) holds the concept of process. A process can create other processes which are known as Child Processes. The process takes more time to terminate and it is isolated means it does not share the memory with any other process.
Detailed Answer is available here
12. Explain Kernel Memory Management
This is not a trivial question. It is very deep and convoluted. So I would hope that interviewer will only be trying to see if you understand the basics around the Kernel Memory Management
Detailed Answer is available here
13. Explain Processes and threads ?
Detailed Answer is available here
14. Explain different type of task status ?
Detailed Answer is available here
15. Explain Linux Concurrency and Race Conditions ?
Detailed Answer is available here
16. Explain STACK and HEAP in Operating System ?
Detailed Answer is available here
17. Explain Memory Leak ?
Naive definition:Â Failure to releaseÂ unreachableÂ memory, which can no longer be allocated again by any process during execution of the allocating process. This can mostly be cured by using GC (Garbage Collection) techniques or detected by automated tools.
Subtle definition:Â Failure to releaseÂ reachableÂ memory which is no longer needed for your program to function correctly. This is nearly impossible to detect with automated tools or by programmers who are not familiar with the code. While technically it is not a leak, it has the same implications as the naive one. This is not my own idea only. You can come across projects that are written in a garbage collected language but still mention fixing memory leaks in their changelogs.
18. How does Linux handles Interrupts ?
Detailed Answer is available here
19. Explain Load Average ?
The best definition and internals aboutÂ load averageÂ can be isÂ explained here. I would encourage everybody to go though this website for more deeper understanding about internals
20. What happens when you try to curl to website ?
This is very famous question and comes to life every now and then. However I would think that we all should be aware of the internal process flow when you doÂ curl www.google.comÂ . Once the bestÂ detailedÂ explanationÂ I found is here. One can certainly argue that this way too much detail but hey no harm in knowing things completely, you may not say this whole thing when asked but one should certainly know about it

Question: There is a service running on a system and you have been told that the service is not running properly. How would you troubleshoot?
Answer:Â After verifying the DNS and other things, I would try toÂ SSHÂ to the system and try to see what is going on
Follow Question:Â You get an error message like the below:
ssh: connect to host example.com port 22: Resource temporarily unavailable
however you did find out that you haveÂ IPMIÂ access to the machine, so you can use that to login and you get something like this:
root@example.com#
Follow up Answer:Â So now I will try to run some basic commands to see what is going on likeÂ topÂ ,Â psÂ etc
Follow Question:Â You still get a similar error for any command you run:
fork: retry: Resource temporarily unavailable
Note: Now you might already know what is the issue, at least have some idea about it. It is related toÂ Resource being exhaustedÂ may be files, processes etc etc and you figured that you canâ€™t run any command (specifically any external command, which needs forking).
Actual Question:Â How would you troubleshoot a linux box, given none of the external commands executes?
Facts:Â What should we do ? Use commands which areÂ internalÂ orÂ built-inÂ to theÂ shellÂ .
So how to find what commands are built-in and can be useful to you for troubleshooting ? Also if external commands are not available then how to gather information about the system (top,Â ps,Â lsofâ€¦.evenÂ catÂ is not available )â€¦..ğŸ¤”
â†’Â /procÂ filesystem and couple ofÂ built-inÂ likeÂ readÂ andÂ for
TypeÂ helpÂ in theÂ shellÂ and it will give you all the commands which areÂ in-buildÂ to theÂ shell
Read aboutÂ /procÂ filesystem in my previous blogÂ SRE/DevOps Interview Questions â€” Linux TroubleshootingÂ and alsoÂ here
Apparently, all the information coming from commands likeÂ psÂ ,Â lsofÂ ,Â vmstatÂ etc etc can be found inÂ /procÂ file system if you look at the right file.
For exampleÂ cmdlineÂ file tells you about the last command ran on the system,Â fdÂ directory contains all the file descriptors and all the folder with numbers are the PIDs running on the system.
So assuming system has too many files open and all resources are exhausted, how to see if whichÂ pidÂ is using how many file without using external commands
for fd in /proc/[0-9]*/fd/*; do echo $fd ; done
/proc/1/fd/0
/proc/1/fd/1
/proc/1/fd/2
/proc/1/fd/255
/proc/1/fd/3
This way you can see the file descriptors any pid is using. If you want to see what is last command ran on the system withoutÂ catÂ or see the content of the file withÂ cat
read $(</proc/${PID}/cmdline)
So usingÂ readÂ ,Â forÂ and other internal commands you can use to find out what is going on in the system.
Trick Question:Â How do you delete a file namedÂ -fÂ orÂ --fileÂ ?
Answer:Â Well explainedÂ here. Though the interviewer expects you to walk him/her through theÂ command execution processÂ on the linux system
Question:Â Explain the output below and what command produces this?
ï¿¼
Question:Â Name the fields and what they represents ?
Question:Â Looking at the below output, please explain what is going on in the machine ? Please be as detail and descriptive as possible
ï¿¼
ï¿¼
Question:Â Compare above 2Â vmstatÂ outputs ? and explain the similarities and differences ?
Question: What do you understand from belowÂ vmstatÂ output and what is the relationship betweenÂ inÂ andÂ csÂ column ?
ï¿¼
Trick Question:Â Looking atÂ vmstatÂ can you tell how many CPU and Cores the system has ?
Question: How to find the config and other related files if only the process is known ?
Answer: checkÂ lsof
Question:Â Given there is a TCP Connection between 2 machine? How does packets move if they are IP Datagram packets? If Yes, what would be an advantage? Faster? What about latency?
Explanation:Â Good content to read aboutÂ TCP and UDP
Question:Â When you doÂ curl example.comÂ what happens?
Explanation:Â I donâ€™t have to say what happens when you doÂ curl example.comÂ , What I am going to suggest is that this is basically a combination of multiple questions
* 		How doesÂ curlÂ executes on the system? Basically, go over the whole process of command execution fromÂ userÂ space toÂ kernelÂ space.
* 		Explain theÂ fork()Â andÂ exec()Â calls.
* 		Explain the well knownÂ system callsÂ which might be involved
* 		DNS Resolution fromÂ example.comÂ to anÂ IP Address
* 		Explain the Request transmission from your terminal to the destination machine and then respond back to your terminal
* 		If possible go into detail about theÂ packetÂ transmissionÂ Network layer 2â€“3Â concepts
Follow Up Question:Â The output ofÂ curl example.comÂ is this? Please explain?
>> curl example.com
<HTML>
<HEAD>
<TITLE>Document Has Moved</TITLE>
</HEAD>
<BODY BGCOLOR="white" FGCOLOR="black">
<H1>Document Has Moved</H1>
<HR>
<FONT FACE="Helvetica,Arial"><B>
Description: The document you requested has moved to a new location.  The new location is "https://www.example.com/".
</B></FONT>
<HR>
</BODY>
Explanation: Talk about theÂ Response codeÂ you have received (not visible in output) and why. What can you do to getÂ 200Â response code ?
Explain howÂ HTTPSÂ works and go into detail in aÂ 3-Way handshake. Explain theÂ AsymmetricÂ andÂ Symmetric encryptionÂ in terms ofÂ SSL.Â Here is a niceÂ writeupÂ about it
Follow Up Question:Â How do you tell your system to not usedÂ /etc/hostsÂ Does file override for DNS Resolution?
Answer:Â nsswitch.comÂ read about itÂ here
Question:Â What isÂ nscdÂ service and why it is used ?
Answer:Â Read aboutÂ nscdÂ here
Follow Up Question:Â How does the Linux system know that your application or any application will use which protocol (TCP or UDP) to communicate?
Answer:Â /etc/servicesÂ nice write-upÂ hereÂ on the same.
Question:Â How to simulate 50% packet drop for Testing purposes?
Explanation:Â Here
Question: Talk aboutÂ gRPCÂ and why would one use it ? Pros and cons ?
Explanation:Â Good Read
Question:Â What are the ways to count totalÂ TCP ConnectionsÂ on the system ?
Explanations:Â couple of commands can be used likeÂ netstatÂ ,Â ssÂ and not to forget theÂ /procÂ filesystem ( specificallyÂ /proc/net/sockstatÂ file). Good examplesÂ here
Question:Â How to troubleshootÂ Short Lived ProcessÂ orÂ ProcessesÂ causing CPU Spikes ?
Explanation:Â Good ReadingsÂ hereÂ andÂ here
Hope this helps in your journey and provides more food for the thoughts




